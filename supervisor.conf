# Test supervisor config with cgroup limits

program web
command=/usr/bin/python3 -m http.server 8080
autostart=true
autorestart=on-failure
restart_delay=2
max_restarts=5
memory_limit=50MB
cpu_limit=0.5
stdout=logs/web.log
stderr=logs/web.log

program worker
command=/bin/false
autostart=true
autorestart=on-failure
restart_delay=1
max_restarts=3
memory_limit=10MB
cpu_limit=0.1
stdout=logs/worker.log
stderr=logs/worker.log

program stress
command=/usr/bin/stress --vm 1 --vm-bytes 40M --timeout 5
autostart=true
autorestart=on-failure
restart_delay=1
max_restarts=2
memory_limit=30MB
cpu_limit=0.2
stdout=logs/stress.log
stderr=logs/stress.log

program memhog
command=/home/lallouslinux/memhog.sh
autostart=true
autorestart=on-failure
memory_limit=30MB  ; 30 MB
cpu_limit=0.5
stdout=logs/memhog.log
stderr=logs/memhog.log